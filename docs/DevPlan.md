# 开发计划（Dev Plan）

## 当前版本：MVP

### 功能模块
- 用户系统（注册、登录、鉴权）
- ESG任务模块（任务列表、打卡）
- 积分系统
- 数据仪表盘

### 命名规范
- 路由：RESTful
- 文件夹：snake_case
- 模型类：PascalCase

### 依赖关系
api -> services -> models/schemas -> db

## 开发阶段

### 阶段一：基础架构（1周）- ✅ 已完成
- [x] 项目结构搭建
- [x] 数据库模型设计
- [x] 基础依赖安装
- [x] 配置文件编写
- [x] 数据库连接配置

### 阶段二：核心功能开发（2周）- 🔄 进行中 [90%]
- [x] 用户模块
  - [x] 注册接口
  - [x] 登录接口
  - [x] JWT认证中间件
  - [x] 用户信息接口
- [x] ESG任务模块
  - [x] 任务列表接口
  - [x] 任务分类筛选
  - [x] 每日任务生成
- [x] 行为记录模块
  - [x] 打卡提交接口
  - [x] 行为记录存储
  - [x] 防重复提交逻辑
- [x] 积分系统
  - [x] 积分计算逻辑
  - [x] 积分查询接口
  - [x] 积分历史记录

### 阶段三：数据仪表盘（1周）- ✅ 已完成 [100%]
- [x] 用户统计数据接口
  - [x] 任务完成率
  - [x] 积分趋势
  - [x] 活跃度分析
- [x] 数据可视化处理 [100%]

### 阶段四：测试与优化（1周）- ✅ 已完成 [100%]
- [x] 单元测试编写
- [x] 集成测试
- [x] 性能优化 [100%]
- [x] 安全性检查
- [x] 代码重构与清理 [100%]

### 阶段五：文档与部署（1周）- ✅ 已完成 [100%]
- [x] API文档完善
- [x] 用户指南编写 [100%]
- [x] 部署文档 [100%]
- [x] 生产环境配置
- [x] 监控与日志系统 [100%]

## 技术债务与未来规划

### 已解决问题
- [x] 修复了PostgreSQL连接配置问题，添加了SQLite支持
- [x] 优化了测试配置，使用内存数据库进行测试
- [x] 改善了积分计算逻辑，支持连续打卡奖励
- [x] 完善了用户行为模型，添加了状态和积分字段
- [x] 修复了测试夹具中的并发问题
- [x] 解决了端口占用问题，支持自定义端口配置

### 待优化项
- [ ] 数据库索引优化
- [ ] 缓存机制引入
- [ ] 批量操作接口
- [ ] API响应格式统一
- [ ] 错误处理标准化
- [ ] 日志系统完善

### 未来功能（v2版本）
- [ ] 社区互动模块
- [ ] 奖励兑换系统
- [ ] 移动端适配
- [ ] 多语言支持
- [ ] 高级数据分析
- [ ] 管理员后台界面
- [ ] 用户任务推荐系统
- [ ] 积分等级与成就系统
