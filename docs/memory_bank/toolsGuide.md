# 蔚澜智越工具指南

## LLM API工具

### 功能概述
LLM API工具提供了与多种LLM服务提供商的统一接口，支持文本处理、图片理解等多模态场景。主要特性包括：

- 支持多种模型提供商：OpenAI、Azure OpenAI、Anthropic Claude、Google Gemini
- 提供统一API接口，便于切换不同提供商
- 支持图像处理和多模态输入
- 灵活的环境配置优先级系统
- 完整的错误处理和日志记录

### 使用方式

```python
from tools.llm_api import query_llm

# 基本文本查询
response = query_llm(
    prompt="分析以下数据趋势",
    provider="openai",
    model="gpt-4o"  # 可选，默认会使用推荐模型
)

# 多模态查询（带图像）
response = query_llm(
    prompt="描述这个图像中的内容",
    provider="anthropic",
    model="claude-3-sonnet-20240229",
    image_path="path/to/image.png"
)
```

### 环境配置
工具使用以下优先级加载环境变量：
1. 系统环境变量
2. .env.local（用户特定覆盖）
3. .env（项目默认值）
4. .env.example（示例配置）

### 命令行使用
```bash
python tools/llm_api.py --prompt "你的查询内容" --provider openai --model gpt-4o --image path/to/image.png
```

## 网页抓取工具

### 功能概述
基于Playwright的网页内容获取工具，支持复杂网页解析和内容提取。

### 主要功能
- 完整网页内容抓取
- JavaScript渲染支持
- 元素选择和提取
- 截图验证
- 表格数据结构化

### 最佳实践
- 使用CSS选择器精确定位元素
- 设置适当的等待时间确保动态内容加载
- 添加用户代理标识避免被封禁
- 实现请求限速和重试机制

## 搜索引擎工具

### 功能概述
集成DuckDuckGo等搜索引擎的查询工具，支持获取实时信息并过滤噪声。

### 主要功能
- 关键词搜索
- 高级过滤选项
- 结果聚合和去重
- 多语言查询支持

### 使用提示
- 使用精确关键词提高搜索精度
- 适当使用搜索运算符（如site:、filetype:）
- 处理国际化查询时注意UTF-8编码
- 利用过滤功能移除不相关结果

## 自我进化系统

### 功能概述
通过积累项目特定知识和经验教训，不断优化系统性能的机制。

### 核心组件
- Scratchpad：思考和计划的工作区
- 经验教训记录：学习到的技术知识和模式
- 规则更新机制：自动更新系统规则和提示词

### 实施流程
1. 收集执行结果和用户反馈
2. 分析成功经验和失败案例
3. 提取可复用的模式和教训
4. 更新系统规则和提示词
5. 应用到下一次任务执行

### 规划执行模式
系统基于规划-执行模式工作：
1. 预先规划并细分任务
2. 按部就班执行每个子任务
3. 收集结果并评估
4. 根据反馈调整后续计划
5. 从每次执行中学习并改进

## 多模态分析工具

### 功能概述
集成文本、图像和代码分析的综合工具，支持跨模态理解和推理。

### 主要功能
- 图像内容分析和识别
- 代码质量评估和建议
- 文本语义分析
- 跨模态关联分析

### 应用场景
- UI测试和验证
- 数据可视化解读
- 代码审查和优化
- 多媒体内容处理

## 工具集成最佳实践

1. **环境隔离**：使用Python虚拟环境(venv)隔离项目依赖
2. **错误处理**：实现健壮的错误处理和重试机制
3. **日志记录**：调试信息输出到stderr，保持stdout输出干净
4. **自动选择**：基于任务特性智能选择最适合的工具组合
5. **代码复用**：将常用功能抽象为可复用组件
6. **性能优化**：批量处理API请求减少网络开销
7. **安全实践**：敏感信息加密存储，实现访问控制 